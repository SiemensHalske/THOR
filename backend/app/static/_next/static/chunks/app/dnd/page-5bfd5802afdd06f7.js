(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2785],{44083:function(e,t,i){Promise.resolve().then(i.bind(i,17984))},17984:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return Z}});var n=i(57437),r=i(2265),l=i(94546),d=i(32515),a=i(94322),s=i(4157),o=i(30796),p=i.n(o),c=i(71375),u=i.n(c),h=i(11850),g=i(70270),m=i(94696),x=i(83719),v=i(11052),f=i.n(v),_=e=>{let{id:t,temperature:i,humidity:r,pressure:l}=e;return(0,n.jsx)(g.Z,{className:f().card,children:(0,n.jsxs)(m.Z,{children:[(0,n.jsxs)(x.Z,{variant:"h5",component:"div",children:["Sensor ID: ",t]}),(0,n.jsxs)(x.Z,{variant:"body2",color:"text.secondary",children:["Temperature: ",i," \xb0C"]}),(0,n.jsxs)(x.Z,{variant:"body2",color:"text.secondary",children:["Humidity: ",r," %"]}),(0,n.jsxs)(x.Z,{variant:"body2",color:"text.secondary",children:["Pressure: ",l," hPa"]})]})})};let j=(e,t)=>[20*Math.round(e/20),20*Math.round(t/20)],y=e=>{let{item:t,index:i,moveItem:a}=e,s=(0,r.useRef)(null),[,o]=(0,l.L)({accept:"ITEM",hover(e,i){var n,r;if(!s.current)return;let l=e.id,d=t.id;if(l===d)return;let o=null===(n=s.current)||void 0===n?void 0:n.getBoundingClientRect(),p=(o.bottom-o.top)/2,c=i.getClientOffset(),u=(null!==(r=null==c?void 0:c.y)&&void 0!==r?r:0)-o.top;l<d&&u<p||l>d&&u>p||(a(l,d),e.id=d)}}),[{isDragging:p},c]=(0,d.c)({type:"ITEM",item:{id:t.id,left:t.left,top:t.top,type:t.type},collect:e=>({isDragging:e.isDragging()})});return c(o(s)),(0,n.jsx)("li",{ref:s,className:"".concat(u().widgetItem," ").concat(p?u().dragging:""),children:t.text})},w=e=>{var t;let{item:i,onDrop:l,onSelect:a}=e,s=(0,r.useRef)(null),[{isDragging:o},p]=(0,d.c)({type:"DROPPED_ITEM",item:{id:i.id,left:i.left,top:i.top,type:i.type},collect:e=>({isDragging:e.isDragging()})});return p(s),(0,n.jsx)("div",{ref:s,className:"".concat(u().droppedItem," ").concat(o?u().dragging:""),style:{left:i.left,top:i.top,width:i.width||100,height:i.height||100},onClick:()=>a(i),children:"map"===i.type?(0,n.jsxs)("div",{style:{width:"400px",height:"400px",position:"absolute",left:-1,top:-1},children:[(0,n.jsx)(h.default,{markers:[],locationEnabled:!1,center:null!==(t=i.center)&&void 0!==t?t:[8.251120510754511,51.73967409793433]}),(0,n.jsx)("div",{className:u().mapOverlay,style:{display:i.hidden?"block":"transparent"}})]}):"data"===i.type&&void 0!==i.sensorId?(0,n.jsx)("div",{style:{width:"225px",height:"150px",position:"absolute",left:-11,top:-11},children:(0,n.jsx)(_,{id:i.sensorId,temperature:25,humidity:50,pressure:1013})}):i.text})},b=e=>{let{items:t,onDrop:i,onSelect:d}=e,a=(0,r.useRef)(null),[,s]=(0,l.L)({accept:["ITEM","DROPPED_ITEM"],drop:(e,n)=>{let r=n.getDifferenceFromInitialOffset(),l=Math.round(e.left+r.x),d=Math.round(e.top+r.y);[l,d]=j(l,d),t.some(t=>{if(t.id===e.id)return!1;let i={left:t.left,top:t.top,right:t.left+(t.width||100),bottom:t.top+(t.height||100)},n={left:l,top:d,right:l+(e.width||100),bottom:d+(e.height||100)};return n.left<i.right&&n.right>i.left&&n.top<i.bottom&&n.bottom>i.top})?alert("Widgets cannot overlap!"):i(e.id,l,d)}});return s(a),(0,n.jsx)("div",{ref:a,className:u().droppableArea,children:t.map(e=>(0,n.jsx)(w,{item:e,onDrop:i,onSelect:d},e.id))})},I=e=>{let{items:t,onDrop:i}=e,[,r]=(0,l.L)({accept:"DROPPED_ITEM",drop:e=>{i(e.id)}});return(0,n.jsxs)("div",{className:u().toolbox,ref:r,children:[(0,n.jsx)("h2",{children:"Widgets"}),(0,n.jsx)("ul",{className:u().widgetsList,children:t.map((e,t)=>(0,n.jsx)(y,{index:t,item:e,moveItem:()=>{}},e.id))})]})},D=(e,t,i)=>e+t/60+i/3600,C=e=>{let t=Math.floor(e),i=Math.floor((e-t)*60);return[t,i,(e-t-i/60)*3600]},N=e=>{var t,i,r,l;let{item:d,onChange:a}=e,s=e=>{let{name:t,value:i}=e.target,n=parseFloat(i),r={...d};if(t.startsWith("latitude")||t.startsWith("longitude")){var l,s,o,p,c,u,h,g;let e,i,d;let[a,m]=t.split("_");"longitude"===a?[e,i,d]=C(null!==(p=null===(o=r.center)||void 0===o?void 0:o[0])&&void 0!==p?p:0):[e,i,d]=C(null!==(u=null===(c=r.center)||void 0===c?void 0:c[1])&&void 0!==u?u:0),"deg"===m&&(e=n),"min"===m&&(i=n),"sec"===m&&(d=n),r.center=["longitude"===a?D(e,i,d):null!==(h=null===(l=r.center)||void 0===l?void 0:l[0])&&void 0!==h?h:0,"latitude"===a?D(e,i,d):null!==(g=null===(s=r.center)||void 0===s?void 0:s[1])&&void 0!==g?g:0]}else"sensorId"===t?r.sensorId=parseInt(i,10):r[t]=n;a(r)},[o,p,c]=C(null!==(r=null===(t=d.center)||void 0===t?void 0:t[1])&&void 0!==r?r:0),[h,g,m]=C(null!==(l=null===(i=d.center)||void 0===i?void 0:i[0])&&void 0!==l?l:0);return(0,n.jsxs)("div",{className:u().properties,children:[(0,n.jsxs)("p",{children:["ID: ",d.id]}),(0,n.jsx)("div",{children:(0,n.jsxs)("label",{children:["Text:",(0,n.jsx)("input",{type:"text",name:"text",value:d.text,onChange:s})]})}),"map"===d.type&&d.center&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{children:"Map Center"}),(0,n.jsxs)("label",{children:["Latitude:",(0,n.jsx)("input",{type:"number",name:"latitude_deg",value:o,onChange:s}),"\xb0",(0,n.jsx)("input",{type:"number",name:"latitude_min",value:p,onChange:s}),"'",(0,n.jsx)("input",{type:"number",name:"latitude_sec",value:c,step:"0.01",onChange:s}),'"']})]}),(0,n.jsx)("div",{children:(0,n.jsxs)("label",{children:["Longitude:",(0,n.jsx)("input",{type:"number",name:"longitude_deg",value:h,onChange:s}),"\xb0",(0,n.jsx)("input",{type:"number",name:"longitude_min",value:g,onChange:s}),"'",(0,n.jsx)("input",{type:"number",name:"longitude_sec",value:m,step:"0.01",onChange:s}),'"']})})]}),"data"===d.type&&(0,n.jsx)("div",{children:(0,n.jsxs)("label",{children:["Sensor ID:",(0,n.jsx)("input",{type:"number",name:"sensorId",value:d.sensorId,onChange:s})]})})]})};var Z=()=>{let[e]=(0,r.useState)([{id:1,text:"Widget 1",type:"text",left:0,top:0,width:100,height:100},{id:2,text:"Widget 2",type:"text",left:0,top:0,width:100,height:100},{id:3,text:"Widget 3",type:"text",left:0,top:0,width:100,height:100},{id:4,text:"Data Widget",type:"data",left:0,top:0,width:0,height:0,sensorId:1},{id:5,text:"Map Widget",type:"map",left:0,top:0,width:400,height:400,center:[8.251120510754511,51.73967409793433],hidden:!0}]),[t,i]=(0,r.useState)([]),[l,d]=(0,r.useState)(null);return(0,n.jsx)(a.W,{backend:s.PD,children:(0,n.jsxs)("div",{className:u().appContainer,children:[(0,n.jsx)("h1",{className:u().appTitle,children:"Drag and Drop List with Drop Area"}),(0,n.jsxs)("div",{className:u().dndContainer,children:[(0,n.jsx)("div",{className:u().column,children:(0,n.jsx)(I,{items:e,onDrop:e=>{i(t.filter(t=>t.id!==e))}})}),(0,n.jsx)("div",{className:u().column,style:{flex:3},children:(0,n.jsx)(b,{items:t,onDrop:(n,r,l)=>{let d=t.findIndex(e=>e.id===n);if(-1!==d)i(p()(t,{[d]:{$merge:{left:r,top:l}}}));else{let d=e.find(e=>e.id===n);d&&i([...t,{...d,id:Date.now(),left:r,top:l}])}},onSelect:e=>{d(e)}})}),(0,n.jsxs)("div",{className:u().column,children:[(0,n.jsx)("h2",{children:"Properties"}),l&&(0,n.jsx)(N,{item:l,onChange:e=>{i(t.map(t=>t.id===e.id?e:t)),d(e)}})]})]})]})})}},11850:function(e,t,i){"use strict";i.r(t);var n=i(57437),r=i(2265),l=i(65956),d=i(84557),a=i(33644),s=i(5005),o=i(73693),p=i(41046),c=i(21166),u=i(88226),h=i(72157),g=i(46068),m=i(70428);i(67026),t.default=e=>{let{markers:t,locationEnabled:i,center:x,visible:v=!0}=e,f=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(f.current){let e=new h.Z({features:t.map(e=>{let t=new u.Z({geometry:new c.Z((0,p.mi)([e.longitude,e.latitude]))});return t.setStyle(new g.ZP({image:new m.Z({src:"/path/to/lightning-icon.png",scale:.05})})),t})}),i=new a.Z({source:e}),n=new d.Z({source:new s.Z,visible:v}),r=new l.Z({target:f.current,layers:[n,i],view:new o.ZP({center:(0,p.mi)(x),zoom:12.5})});return()=>r.setTarget(void 0)}},[t,x,v]),(0,n.jsx)("div",{ref:f,style:{width:"100%",height:"100%"}})}},71375:function(e){e.exports={appContainer:"page_appContainer__6RjzF",appTitle:"page_appTitle__Waxzz",dndContainer:"page_dndContainer__ef8c3",column:"page_column__gNof4",widgetsList:"page_widgetsList__szhNf",widgetItem:"page_widgetItem__w5kUX",dragging:"page_dragging__yVaQL",droppableArea:"page_droppableArea__redhy",droppedItem:"page_droppedItem__R2hPr",mapWidget:"page_mapWidget__nmjWq",over:"page_over__6k4gX",properties:"page_properties__oh5us",mapOverlay:"page_mapOverlay__LXJc_"}},11052:function(e){e.exports={card:"SensorDataCard_card__hn_ZX"}}},function(e){e.O(0,[2764,4741,3719,6145,6066,2971,7023,1744],function(){return e(e.s=44083)}),_N_E=e.O()}]);